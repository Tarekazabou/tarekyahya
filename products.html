<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Découvrez le catalogue de produits prêt à porter Primavet. Collections Homme et Femme de haute qualité.">
    <meta name="keywords" content="Primavet, produits, prêt à porter, vêtements, catalogue, homme, femme">

    <title>Produits | Primavet - Prêt à Porter de Qualité</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/Gemini_Generated_Image_2t7y2l2t7y2l2t7y.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Open+Sans:wght@400;500;600&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- Supabase SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.3/dist/umd/supabase.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="assets/logo1-removebg-preview.png" alt="Primavet" class="logo-img">
            </a>

            <nav class="nav">
                <ul class="nav-menu">
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="about.html">À propos</a></li>
                    <li><a href="products.html" class="active">Collections</a></li>
                    <li><a href="showroom.html">Outfit</a></li>
                    <li><a href="news.html">Actualités</a></li>
                    <li><a href="recruitment.html">Recrutement</a></li>
                    <li><a href="suggestion.html">Suggestion</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
                <a href="quote.html" class="btn btn-primary nav-cta">Demander un devis</a>
                <div class="nav-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Collection</h1>
            <nav class="breadcrumb">
                <a href="index.html">Accueil</a>
                <span>/</span>
                <span>Collection</span>
            </nav>
        </div>
    </section>

    <!-- Products Section - Pull&Bear Style -->
    <section class="pb-collection-section">
        <div class="pb-container">
            <!-- Header with results count -->
            <div class="pb-collection-header">
                <div class="pb-collection-title">
                    <h1>Collection</h1>
                    <span class="pb-results-count" id="results-count">0 articles</span>
                </div>
                <p class="pb-collection-subtitle">Découvrez notre sélection de produits prêt à porter de haute qualité</p>
            </div>

            <!-- Toolbar -->
            <div class="pb-toolbar">
                <!-- Filter Pills -->
                <div class="pb-filter-pills">
                    <button class="pb-pill active" data-filter="all">Tout voir</button>
                    <button class="pb-pill" data-filter="homme">Homme</button>
                    <button class="pb-pill" data-filter="femme">Femme</button>
                </div>

                <!-- Search -->
                <div class="pb-search-wrapper">
                    <i class="fas fa-search pb-search-icon"></i>
                    <input type="text" class="pb-search-input" id="products-search" 
                           placeholder="Rechercher..." onkeyup="handleProductsSearch(event)">
                    <button class="pb-search-clear" id="search-clear" onclick="clearSearch()" style="display: none;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Products Grid -->
            <div class="pb-products-grid" id="products-grid">
                <!-- Products loaded dynamically from Supabase -->
                <div class="pb-loading">
                    <div class="pb-loading-spinner"></div>
                    <p>Chargement...</p>
                </div>
            </div>

            <!-- Pagination -->
            <div id="products-pagination" class="pb-pagination"></div>
        </div>
    </section>

    <!-- Product Detail Modal -->
    <div class="pb-modal" id="productModal">
        <div class="pb-modal-overlay" onclick="closeProductModal()"></div>
        <div class="pb-modal-container">
            <button class="pb-modal-close" onclick="closeProductModal()" aria-label="Fermer">
                <i class="fas fa-times"></i>
            </button>
            <div class="pb-modal-content">
                <div class="pb-modal-image" id="modalImage">
                    <!-- Dynamic content -->
                </div>
                <div class="pb-modal-info">
                    <span class="pb-modal-category" id="modalCategory">Collection</span>
                    <h2 class="pb-modal-title" id="modalTitle">Titre du produit</h2>
                    <p class="pb-modal-desc" id="modalDesc">Description du produit</p>
                    
                    <div class="pb-modal-features">
                        <div class="pb-modal-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Qualité Premium</span>
                        </div>
                        <div class="pb-modal-feature">
                            <i class="fas fa-leaf"></i>
                            <span>Matières Durables</span>
                        </div>
                        <div class="pb-modal-feature">
                            <i class="fas fa-palette"></i>
                            <span>Personnalisable</span>
                        </div>
                        <div class="pb-modal-feature">
                            <i class="fas fa-truck"></i>
                            <span>Livraison Rapide</span>
                        </div>
                    </div>

                    <div class="pb-modal-actions">
                        <a href="quote.html" class="pb-modal-btn pb-modal-btn-primary">
                            <i class="fas fa-file-invoice"></i>
                            Demander un devis
                        </a>
                        <a href="contact.html" class="pb-modal-btn pb-modal-btn-secondary">
                            <i class="fas fa-phone"></i>
                            Nous contacter
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Services Section -->
    <section class="section section-bg">
        <div class="container">
            <div class="section-title">
                <h2>Nos Services</h2>
                <p>En plus de nos produits, nous proposons des services adaptés à vos besoins.</p>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-palette"></i>
                    </div>
                    <h3>Personnalisation</h3>
                    <p>Personnalisez vos vêtements avec votre logo, couleurs et designs sur mesure.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-box"></i>
                    </div>
                    <h3>Commandes en Gros</h3>
                    <p>Tarifs préférentiels pour les commandes en grande quantité.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-truck-fast"></i>
                    </div>
                    <h3>Livraison Express</h3>
                    <p>Service de livraison rapide pour vos commandes urgentes.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>Conseil Expert</h3>
                    <p>Notre équipe vous accompagne dans le choix de vos produits prêt à porter.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Banner -->
    <section class="cta-banner">
        <div class="container">
            <h2>Besoin d'un devis personnalisé ?</h2>
            <p>Contactez-nous pour obtenir un devis adapté à vos besoins spécifiques.</p>
            <div class="cta-buttons">
                <a href="quote.html" class="btn btn-white btn-lg">Demander un devis</a>
                <a href="contact.html" class="btn btn-secondary btn-lg" style="border-color: white; color: white;">Nous
                    contacter</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-about">
                    <div class="footer-logo"><img src="assets/logo1_footer.png" alt="Primavet" class="footer-logo-img"></div>
                    <p>Votre partenaire de confiance pour des produits prêt à porter de qualité supérieure. Innovation,
                        savoir-faire et engagement envers l'excellence.</p>
                    <div class="footer-social">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <div class="footer-links-col">
                    <h4 class="footer-title">Liens Rapides</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Accueil</a></li>
                        <li><a href="about.html">À propos</a></li>
                        <li><a href="products.html">collections</a></li>
                        <li><a href="showroom.html">Outfit</a></li>
                        <li><a href="news.html">Actualités</a></li>
                    </ul>
                </div>

                <div class="footer-links-col">
                    <h4 class="footer-title">Services</h4>
                    <ul class="footer-links">
                        <li><a href="quote.html">Demande de devis</a></li>
                        <li><a href="quote.html">Passer commande</a></li>
                        <li><a href="recruitment.html">Recrutement</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="suggestion.html">Suggestion</a></li>
                    </ul>
                </div>

                <div class="footer-links-col">
                    <h4 class="footer-title">Contact</h4>
                    <ul class="footer-contact">
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <a href="https://www.google.com/maps/search/?api=1&query=Rue+Saad+Ibn+Waqas+Kalâa+Seghira+Tunisie" target="_blank" style="text-decoration: none; color: inherit;">Rue Saad Ibn Waqas<br>Kalâa Seghira (4021), Tunisie</a>
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <span>Fixe: <a href="tel:+21636110027" style="text-decoration: none; color: inherit; font-weight: bold;">36 110 027</a> | Mobile: <a href="tel:+21625500780" style="text-decoration: none; color: inherit; font-weight: bold;">25 500 780</a></span>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <a href="mailto:Societe@primavet.tn" style="text-decoration: none; color: inherit;">Societe@primavet.tn</a>
                        </li>
                        <li>
                            <i class="fas fa-clock"></i>
                            <span>Lun - Ven: 8h00 - 17h00</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2024 Primavet. Tous droits réservés.</p>
                <div class="footer-bottom-links">
                    <a href="#">Mentions légales</a>
                    <a href="#">Politique de confidentialité</a>
                    <a href="espace_admin.html">EA</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/supabase-client.js"></script>
    <script src="js/data-service.js"></script>
    <script src="js/visitor-tracker.js"></script>
    <script src="js/page-renderers.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Search functions
        function handleProductsSearch(event) {
            const searchInput = document.getElementById('products-search');
            const clearBtn = document.getElementById('search-clear');
            
            // Show/hide clear button
            if (searchInput.value.trim()) {
                clearBtn.style.display = 'block';
            } else {
                clearBtn.style.display = 'none';
            }
            
            if (event.key === 'Enter') {
                searchProducts();
            }
        }

        function searchProducts() {
            const searchTerm = document.getElementById('products-search').value.trim();
            PageRenderers.searchProducts(searchTerm);
        }

        function clearSearch() {
            document.getElementById('products-search').value = '';
            document.getElementById('search-clear').style.display = 'none';
            PageRenderers.searchProducts('');
        }

        // Initialize Pull&Bear style filters
        function initPBFilters() {
            const pills = document.querySelectorAll('.pb-pill');
            pills.forEach(pill => {
                pill.addEventListener('click', function() {
                    // Remove active from all
                    pills.forEach(p => p.classList.remove('active'));
                    // Add active to clicked
                    this.classList.add('active');
                    
                    const filter = this.dataset.filter;
                    if (filter === 'all') {
                        PageRenderers.productsCategory = null;
                    } else {
                        PageRenderers.productsCategory = filter;
                    }
                    PageRenderers.productsCurrentPage = 1;
                    PageRenderers.renderProductsPB('products-grid');
                });
            });
        }

        // Update results count
        function updateResultsCount(count) {
            const countEl = document.getElementById('results-count');
            if (countEl) {
                countEl.textContent = `${count} article${count !== 1 ? 's' : ''}`;
            }
        }

        // Open product detail modal
        function openProductModal(name, description, category, gradient, icon) {
            const modal = document.getElementById('productModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            const modalDesc = document.getElementById('modalDesc');
            const modalCategory = document.getElementById('modalCategory');
            
            // Set content
            modalImage.innerHTML = `
                <div class="pb-modal-image-inner" style="background: ${gradient};">
                    <i class="fas ${icon}"></i>
                </div>
            `;
            modalTitle.textContent = name;
            modalDesc.textContent = description;
            modalCategory.textContent = category.charAt(0).toUpperCase() + category.slice(1);
            
            // Show modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close product modal
        function closeProductModal() {
            const modal = document.getElementById('productModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close modal on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeProductModal();
            }
        });

        // Initialize dynamic content on page load
        document.addEventListener('DOMContentLoaded', async function () {
            try {
                // Initialize filters
                initPBFilters();
                
                // Load all products with Pull&Bear style
                await PageRenderers.renderProductsPB('products-grid');

                console.log('✅ Products page content loaded from Supabase');
            } catch (error) {
                console.error('Error loading products page content:', error);
            }
        });
    </script>
</body>

</html>